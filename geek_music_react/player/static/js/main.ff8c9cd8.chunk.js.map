{"version":3,"sources":["assets/imgs/lizhi.png","utils/Loading.js","utils/HttpRequest.js","utils/MyAlert.js","views/LoginAndRegister/LoginAndRegister.jsx","utils/Tools.js","views/Main/Player.jsx","views/Main/RightList.jsx","views/Main/Main.jsx","views/Header/UserCenter.jsx","views/Header/Header.jsx","views/Index.jsx","views/Header/User/EditUserInfo.jsx","routers/index.js","utils/renderRoutes.js","App.js","reducer/index.js","store/index.js","index.js"],"names":["module","exports","Loading","this","count","el","document","querySelector","prototype","show","style","display","hide","type","setTimeout","loading","httpRequest","config","method","data","url","showLoading","Promise","resolve","reject","Axios","Qs","stringify","then","res","catch","err","msg","ms","alertWrapper","innerText","createElement","alertContent","id","className","appendChild","Login","props","debounce","fn","delay","rest","args","state","timerId","clearTimeout","setState","apply","onDebounceKeyUpClick","e","persist","checkUserName","debounceAjax","curPage","src","Logo","alt","name","initialValues","remember","onFinish","submitHandler","bind","Item","label","getValueFromEvent","event","target","value","replace","rules","required","message","validator","_","undefined","length","genNickName","Password","genLoginBtn","genRegisterBtn","setCurPageState","console","log","match","indexOf","getCurPage","regName","code","MyAlert","val","size","block","htmlType","onClick","history","push","values","userName","username","pwd","md5","password","loginHandler","nickname","registerHandler","setUserInfo","userInfo","setAuthed","goToLogin","Component","connect","dispatch","status","toLogin","flag","authed","forwardRef","transformSecondsToMinutes","seconds","min","Math","floor","second","toFixed","Player","optionClickHandler","duration","curTime","curList","curPlayingTimePercent","curState","canvas","isNoVoice","curVolume","optionsDom","playerCom","optionMenus","map","item","idx","classNames","option","isPlaying","iconfonts","iconfont","title","toolTip","key","ref","onEnded","audioEnded","onLoadedMetadata","loadMetaData","onTimeUpdate","timeUpdateHandler","onDurationChange","durationChangeHandler","controls","genCommentListDom","htmlFor","placeholder","submitComment","searchList","closeSearchResult","curSongInfo","getAudioStream","fileNameChinese","processContainerClickHandler","avatar","albumChinese","closeVolume","setVolume","height","initCanvasAndAudioContext","refs","audio","volume","stopPropagation","y","mouseCoords","y1","$","currentTarget","offset","top","y2","percent","Number","setSearchResult","commentList","commentContent","setPlayingState","playNextSong","commentArea","userId","songId","getSongComments","list","sort","a","b","sendCommentList","getElementById","context","getContext","width","window","innerWidth","innerHeight","WIDTH","HEIGHT","load","AudCtx","AudioContext","createMediaElementSource","analyser","createAnalyser","destination","fftSize","barHeight","bufferLength","frequencyBinCount","barWidth","dataArray","Uint8Array","renderFrame","requestAnimationFrame","fillStyle","fillRect","getByteFrequencyData","x","i","percentV","r","g","left","setAudioCurPlayingTime","pageX","pageY","clientX","body","scrollLeft","clientLeft","clientY","scrollTop","clientTop","targetTime","currentTime","curSongId","sendCurSongInfo","songUrl","albumName","fileName","play","siblings","removeClass","end","addClass","hasClass","collectSongBySongId","playPrevSong","pauseTheSong","playTheSong","shareMusic","allList","forEach","albumIdx","Array","isArray","children","song","childIdx","songWillPlay","collectList","refreshCollectList","keyWords","songsList","processBar","pause","songInfo","setMouseDown","mouseStatus","Panel","Collapse","RightList","mouseDownHandler","mouseMoveHandler","mouseUpHandler","playByName","genHasNoCollect","onMouseDown","onMouseMove","onMouseUp","accordion","header","getRightAllList","playByUrl","collectConfig","songListRequest","collectListRequest","all","songListRes","sendAllList","collectListRes","computeCollectList","result","colItem","colIdx","orderId","sendCollectList","Main","player","searchHandler","getCollectList","UserCenter","nickName","to","logout","withRouter","Header","logo","searchVal","myAlert","Index","EditPassword","editNickNameStatus","showModal","canEditPassword","onChange","handleAvatarIptChange","accept","renderNickName","editNickName","setEditNickNameStatusFalse","visible","onCancel","hideModal","footer","editPassword","direction","checkNewPassword","toString","oldPwd","reNewPassword","nickNameChange","getUserInfo","file","files","base64","reader","FileReader","readAsDataURL","onload","uploadAvatar","fileBase64","Routers","path","requiresAuth","component","LoginAndRegister","renderRoutes","routes","authPath","switchProps","route","exact","render","pathname","from","location","App","routers","initState","reducer","action","newState","JSON","parse","persistConfig","storage","storageSession","stateReconciler","autoMergeLevel2","myPersistReducer","persistReducer","store","createStore","persistor","persistStore","ReactDOM"],"mappings":"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","file":"static/js/main.ff8c9cd8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lizhi.cbb70be5.png\";","function Loading() {\n    this.count = 0;\n    this.el = document.querySelector('#loading');\n}\n\nLoading.prototype.show = function () {\n    this.count++;\n    if (this.count === 1) {\n        this.el.style.display = 'flex';\n    }\n}\nLoading.prototype.hide = function (type = 'all') {\n    if (type === 'all') {\n        this.count = 0;\n    } else {\n        if (this.count > 0) {\n            this.count--;\n        }\n    }\n    setTimeout(() => {\n        if (this.count === 0) {\n            this.el.style.display = 'none';\n        }\n    }, 300);\n}\n\nconst loading = new Loading();\nexport default loading;","import Axios from 'axios';\nimport Qs from 'qs';\nimport Loading from '@/utils/Loading'\n\nfunction httpRequest(config) {\n    let method = config.method || 'get';\n    let data = config.data || '';\n    // let url = 'http://localhost:3001' + config.url;\n    let url = config.url;\n    let showLoading = config.showLoading || false;\n    return new Promise(function (resolve, reject) {\n        if (showLoading) Loading.show();\n        Axios({\n            method: method,\n            url: url,\n            data: Qs.stringify(data)\n        }).then(res => {\n            Loading.hide();\n            resolve(res);\n        }).catch(err => {\n            Loading.hide();\n            reject(err);\n        });\n    })\n}\nexport default httpRequest;","class myAlert {\n    show(msg, ms) {\n        let alertWrapper = document.querySelector('body').querySelector('#my-alert');\n        if (alertWrapper) {\n            alertWrapper.style.display = 'flex';\n            let alertContent = alertWrapper.querySelector('p');\n            alertContent.innerText = msg;\n            if (ms) {\n                setTimeout(() => {\n                    this.hide();\n                }, ms);\n            }\n        } else {\n            let alertWrapper = document.createElement('div');\n            let alertContent = document.createElement('p');\n            alertWrapper.id = 'my-alert';\n            alertContent.className = 'my-alert-p';\n            alertContent.innerText = msg;\n            alertWrapper.appendChild(alertContent);\n            document.querySelector('body').appendChild(alertWrapper);\n            if (ms) {\n                setTimeout(() => {\n                    this.hide();\n                }, ms);\n            }\n        }\n    }\n    hide() {\n        let alertWrapper = document.querySelector('body').querySelector('#my-alert');\n        if (alertWrapper) {\n            alertWrapper.style.display = 'none';\n        }\n    }\n}\n\nexport default new myAlert();","import React, { Component } from \"react\";\nimport { Form, Input, Button } from \"antd\";\n// import { Link } from \"react-router-dom\";\nimport httpRequest from \"@/utils/HttpRequest\";\nimport MyAlert from \"@/utils/MyAlert\";\nimport Logo from \"@/assets/imgs/lizhi.png\";\nimport { connect } from \"react-redux\";\nimport md5 from \"js-md5\";\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      curPage: \"/login\", //   /register\n      timerId: null,\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"login-register-wrapper\">\n        <div className=\"content\">\n          <div className=\"title\">\n            <img className=\"logo-img\" src={Logo} alt=\"\" />\n            <p>Geek Music</p>\n          </div>\n          <Form\n            name=\"basic\"\n            initialValues={{\n              remember: true,\n            }}\n            onFinish={this.submitHandler.bind(this)}\n          >\n            <Form.Item\n              name=\"username\"\n              label=\"Username\"\n              className=\"label\"\n              getValueFromEvent={(event) => {\n                return event.target.value.replace(/[\\u4E00-\\u9FA5]/g, \"\");\n              }}\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入用户名\",\n                },\n                {\n                  validator: (_, value) => {\n                    if (value !== undefined) {\n                      if (value.length > 0) {\n                        return Promise.resolve();\n                      } else {\n                        return Promise.reject(\"账号长度不得小于1位!\");\n                      }\n                    } else {\n                      return Promise.reject(\"账号不得为空!\");\n                    }\n                  },\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n\n            {this.genNickName()}\n\n            <Form.Item\n              label=\"Password\"\n              name=\"password\"\n              className=\"label\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入密码\",\n                },\n              ]}\n            >\n              <Input.Password className=\"ipt\" />\n            </Form.Item>\n\n            {this.genLoginBtn()}\n            {this.genRegisterBtn()}\n          </Form>\n        </div>\n      </div>\n    );\n  }\n  // judgeChinese() {\n  //   οnkeyup = \"value=value.replace(/[\\u4E00-\\u9FA5]/g,'')\";\n  // }\n  componentDidMount() {\n    this.setCurPageState();\n    setTimeout(() => {\n      console.log(this.props.match);\n    }, 1000);\n  }\n  debounce = (fn, delay = 3000) => {\n    //期间间隔执行 节流\n    return (...rest) => {\n      //箭头函数是没有arguments的 所以用...rest 来代替\n      let args = rest;\n      if (this.state.timerId) clearTimeout(this.state.timerId); //要用this.timerId 而不能直接定义var timerId=null;\n      this.setState({\n        timerId: setTimeout(() => {\n          fn.apply(this, args);\n        }, delay),\n      });\n    };\n  };\n\n  onDebounceKeyUpClick = (e) => {\n    e.persist(); // 如果要传递\n    //加入防抖动后 在频繁输入后 不会发送请求\n    let debounceAjax = this.debounce(this.checkUserName, 800);\n    debounceAjax(e);\n  };\n\n  //根据当前路由设置state\n  setCurPageState() {\n    if (this.props.match.url.indexOf(\"login\") !== -1) {\n      this.setState({\n        curPage: \"/login\",\n      });\n    } else {\n      this.setState({\n        curPage: \"/register\",\n      });\n    }\n  }\n\n  // 检查用户名是否可用\n  checkUserName(e) {\n    if (this.getCurPage() === \"/register\") {\n      console.log(\"在注册页\");\n      let regName = e.target.value;\n      console.log(e.target.value);\n      let config = {\n        data: {\n          regName,\n        },\n        method: \"post\",\n        url: \"/register/user_register/checkname.music\",\n      };\n      httpRequest(config)\n        .then((res) => {\n          if (res.data.code === 1) {\n            MyAlert.show(res.data.val, 2500);\n          } else {\n            console.log(\"用户名可用\");\n          }\n        })\n        .catch((err) => {});\n    } else {\n      // console.log('在登录页');\n      return;\n    }\n  }\n\n  // 登录按钮 登录和注册的 按钮 是不一样的\n  genLoginBtn() {\n    if (this.getCurPage() === \"/login\") {\n      return (\n        <Form.Item>\n          <Button\n            size=\"large\"\n            block\n            className=\"login\"\n            type=\"primary\"\n            htmlType=\"submit\"\n          >\n            登录\n          </Button>\n        </Form.Item>\n      );\n    } else {\n      return (\n        <Form.Item>\n          <Button\n            size=\"large\"\n            block\n            className=\"login\"\n            type=\"primary\"\n            onClick={() => this.props.history.push(\"/login\")}\n          >\n            已有账号？<span className=\"click-me\"> 点我 </span> 登陆\n          </Button>\n        </Form.Item>\n      );\n    }\n  }\n  // 注册按钮\n  genRegisterBtn() {\n    if (this.getCurPage() === \"/login\") {\n      return (\n        <Form.Item>\n          <Button\n            size=\"large\"\n            block\n            className=\"register\"\n            type=\"primary\"\n            onClick={() => this.props.history.push(\"/register\")}\n          >\n            还没有账号？ <span className=\"click-me\">去注册</span>\n          </Button>\n        </Form.Item>\n      );\n    } else {\n      return (\n        <Form.Item>\n          <Button\n            size=\"large\"\n            block\n            className=\"register\"\n            type=\"primary\"\n            htmlType=\"submit\"\n          >\n            确认注册\n          </Button>\n        </Form.Item>\n      );\n    }\n  }\n\n  // 昵称输入框\n  genNickName() {\n    if (this.getCurPage() === \"/login\") {\n      return \"\";\n    } else {\n      return (\n        <Form.Item label=\"Nickname\" name=\"nickname\" className=\"label\">\n          <Input className=\"ipt\" />\n        </Form.Item>\n      );\n    }\n  }\n\n  getCurPage() {\n    if (this.state.curPage.indexOf(\"login\") !== -1) {\n      return \"/login\";\n    } else {\n      return \"/register\";\n    }\n  }\n\n  // 登录\n  submitHandler(values) {\n    let config;\n    let userName = values.username;\n    let pwd = md5(values.password);\n    if (this.getCurPage() === \"/login\") {\n      config = {\n        method: \"post\",\n        data: {\n          userName,\n          pwd,\n        },\n        url: \"/login/user_login.music\",\n      };\n      this.loginHandler(config);\n    } else {\n      let nickname = values.nickname;\n      config = {\n        method: \"post\",\n        data: {\n          userName,\n          nickname,\n          pwd,\n        },\n        url: \"/register/user_register.music\",\n      };\n      this.registerHandler(config);\n    }\n  }\n  // 登录\n  loginHandler(config) {\n    httpRequest(config)\n      .then((res) => {\n        let data = res.data;\n        if (data.code !== 0) {\n          MyAlert.show(data.val, 3000);\n        } else {\n          this.props.setUserInfo(data.userInfo);\n          this.props.setAuthed(true);\n          this.props.goToLogin(false);\n          this.props.history.replace(\"/index\");\n        }\n        // console.log(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  //点击注册按钮\n  registerClickHandler() {\n    this.props.history.push(\"/register\");\n  }\n\n  // 注册\n  registerHandler(config) {\n    httpRequest(config)\n      .then((res) => {\n        if (res.data.code !== 0) {\n          MyAlert.show(res.data.val, 2500);\n        } else {\n          MyAlert.show(\"注册成功，即将跳转到登录页\", 2000);\n          setTimeout(() => {\n            this.props.history.push(\"/login\");\n          }, 2000);\n        }\n        console.log(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\nconst mapStateToProps = (state) => {\n  return state;\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    goToLogin(status) {\n      const action = {\n        type: \"goToLogin\",\n        toLogin: status,\n      };\n      dispatch(action);\n    },\n    setUserInfo(userInfo) {\n      const action = {\n        type: \"userInfo\",\n        userInfo: userInfo,\n      };\n      dispatch(action);\n    },\n    setAuthed(flag) {\n      const action = {\n        type: \"authed\",\n        authed: flag,\n      };\n      dispatch(action);\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true,\n})(Login);\n","function transformSecondsToMinutes(seconds) {\n    let min = Math.floor((seconds / 60));\n    let second = (seconds - min * 60).toFixed(0);\n    if (second < 10) {\n        return `${min}:0${second}`\n    } else {\n        return `${min}:${second}`\n    }\n}\n\nfunction throttle(callback, time) {\n    var canDo = true\n    return function () {\n        if (canDo) {\n            canDo = false\n            setTimeout(function () {\n                callback && callback()\n                canDo = true\n            }, time || 300)\n        }\n    }\n}\n\nfunction debouce(callback, time) {\n    var timer;\n    return () => {\n        clearTimeout(timer)\n        timer = setTimeout(() => {\n            console.log('debouce触发');\n            callback && callback()\n        }, time || 300)\n    }\n}\nexport {\n    transformSecondsToMinutes,\n    throttle,\n    debouce\n}","import React, { Component } from \"react\";\nimport $ from \"jquery\";\nimport { connect } from \"react-redux\";\nimport \"@/assets/css/player.css\";\nimport avatar from \"@/assets/imgs/lizhi.png\";\nimport { transformSecondsToMinutes } from \"@/utils/Tools\";\nimport httpRequest from \"@/utils/HttpRequest\";\nimport MyAlert from \"@/utils/MyAlert\";\n\nclass Player extends Component {\n  constructor(props) {\n    super(props);\n    this.optionClickHandler = this.optionClickHandler.bind(this);\n    this.state = {\n      duration: 0,\n      curTime: 0,\n      curList: \"allList\", // allList, search,collect\n      curPlayingTimePercent: 0,\n      curState: false,\n      canvas: null, // 当前的canvas\n      timerId: null,\n      isNoVoice: false, // 是否是静音状态\n      curVolume: 0.5,\n    };\n  }\n\n  render() {\n    let optionsData = this.props.playerCom.optionMenus;\n    let optionsDom = optionsData.map((item, idx) => {\n      let classNames = \"option \" + item.option;\n      if (item.option.indexOf(\"play\") !== -1) {\n        if (this.props.isPlaying === 1) {\n          classNames = \"option \" + item.option + \" hide\";\n        }\n      }\n      if (item.option.indexOf(\"paused\") !== -1) {\n        if (this.props.isPlaying === 2) {\n          classNames = \"option \" + item.option + \" hide\";\n        }\n      }\n      let iconfonts = \"iconfont \" + item.iconfont;\n      return (\n        <div\n          title={item.toolTip}\n          key={idx}\n          className={classNames}\n          onClick={this.optionClickHandler}\n        >\n          <i className={iconfonts}></i>\n        </div>\n      );\n    });\n    return (\n      <div className=\"player\">\n        <div className=\"content\">\n          <audio\n            id=\"audio\"\n            className=\"audio-tag\"\n            ref=\"audio\"\n            onEnded={this.audioEnded.bind(this)}\n            onLoadedMetadata={this.loadMetaData.bind(this)}\n            onTimeUpdate={this.timeUpdateHandler.bind(this)}\n            onDurationChange={this.durationChangeHandler.bind(this)}\n            controls\n          ></audio>\n          <div className=\"player-ui\">\n            <div className=\"top\">\n              <div className=\"top-left\">\n                <canvas id=\"canvas\"></canvas>\n              </div>\n              <div className=\"common-list top-right\">\n                <h5 className=\"comments-title\">热门评论</h5>\n                <ul>{this.genCommentListDom()}</ul>\n\n                <div className=\"comment-area\">\n                  <div className=\"ipt-container\">\n                    <label htmlFor=\"comment\">发表评论：</label>\n                    <div className=\"textarea-btn-container\">\n                      <textarea\n                        name=\"\"\n                        id=\"comment\"\n                        ref=\"commentArea\"\n                        placeholder=\"请留下您的评论\"\n                      ></textarea>\n                      <button\n                        className=\"comment-btn\"\n                        onClick={this.submitComment.bind(this)}\n                      >\n                        评论\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div\n              className={\n                this.props.searchList.length ? \"middle search-result\" : \"hide\"\n              }\n            >\n              <span\n                onClick={this.closeSearchResult.bind(this)}\n                className=\"close-x\"\n              >\n                ×\n              </span>\n              <h5 className=\"sr-res-title\">搜索结果</h5>\n              <ul className=\"ul\">\n                {this.props.searchList.map((item, idx) => {\n                  return (\n                    <li\n                      className={\n                        this.props.curSongInfo.id === item.id ? \"active\" : \"\"\n                      }\n                      onClick={this.getAudioStream.bind(this, item, \"search\")}\n                      key={idx}\n                    >\n                      {item.fileNameChinese}\n                    </li>\n                  );\n                })}\n              </ul>\n            </div>\n            <div className=\"bottom\">\n              <div\n                className=\"process-container\"\n                onClick={this.processContainerClickHandler.bind(this)}\n              >\n                <div ref=\"processBar\" className=\"process-bar\">\n                  <span className=\"dot\"></span>\n                </div>\n              </div>\n              <div className=\"fragment\">\n                <div className=\"song-info\">\n                  <img className=\"info-left\" src={avatar} alt=\"\" />\n                  <div className=\"info-right\">\n                    <p className=\"song-album-name\">\n                      <span>{this.props.curSongInfo.fileNameChinese}</span>\n                      <span>{this.props.curSongInfo.albumChinese}</span>\n                    </p>\n                    <p\n                      className={\n                        this.props.curSongInfo.id ? \"duration-time\" : \"hide\"\n                      }\n                    >\n                      {transformSecondsToMinutes(this.state.curTime)} /{\" \"}\n                      {transformSecondsToMinutes(this.state.duration)}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"controls\">\n                  <div className=\"wrapper\">\n                    {optionsDom}\n                    <div\n                      className=\"option volume\"\n                      onClick={this.closeVolume.bind(this)}\n                    >\n                      <i\n                        className={\n                          this.state.isNoVoice\n                            ? \"iconfont icon-jingyin1\"\n                            : \"iconfont icon-shengyin\"\n                        }\n                      ></i>\n                      <div\n                        onClick={this.setVolume.bind(this)}\n                        className=\"vertical-container\"\n                      >\n                        <div\n                          className=\"vertical-bar\"\n                          style={{ height: this.state.curVolume * 100 + \"%\" }}\n                        >\n                          <div className=\"dot\"></div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  componentDidMount() {\n    this.initCanvasAndAudioContext();\n  }\n  // 是否要静音\n  closeVolume() {\n    let isNoVoice = this.state.isNoVoice;\n    this.setState(\n      {\n        isNoVoice: !isNoVoice,\n      },\n      () => {\n        if (this.state.isNoVoice) {\n          this.refs.audio.volume = 0;\n        } else {\n          this.refs.audio.volume = this.state.curVolume;\n        }\n      }\n    );\n  }\n  // 设置音频的音量\n  setVolume(e) {\n    if (this.state.isNoVoice) {\n      this.setState({\n        isNoVoice: false,\n      });\n    }\n    // console.log(\"外层元素：\", e);\n    e.stopPropagation();\n    //鼠标点击的绝对位置\n    var mousePos = this.mouseCoords(e);\n    var y = mousePos.y;\n    //alert(\"鼠标点击的绝对位置坐标：\"+x+\",\"+y);\n\n    //获取div在body中的绝对位置\n    var y1 = $(e.currentTarget).offset().top;\n    let height = $(e.currentTarget).height();\n    //鼠标点击位置相对于div的坐标\n    var y2 = y - y1;\n    let percent = (1 - y2 / height).toFixed(2) * 100;\n    $(\".vertical-bar\").height(percent + \"%\");\n    this.refs.audio.volume = Number((1 - y2 / height).toFixed(2));\n    console.log(this.refs.audio.volume);\n    this.setState({\n      curVolume: Number((1 - y2 / height).toFixed(2)),\n    });\n  }\n\n  // 关闭搜索结果窗口\n  closeSearchResult() {\n    document.querySelector(\"#search-val\").value = \"\";\n    this.props.setSearchResult([]);\n  }\n\n  // 生成评论列表\n  genCommentListDom() {\n    if (this.props.commentList.length) {\n      return this.props.commentList.map((item, idx) => {\n        return (\n          <li key={idx}>\n            {item.commentContent}\n            <i className=\"iconfont icon-xin\"></i>\n          </li>\n        );\n      });\n    } else {\n      return (\n        <div className=\"has-no-comment\">\n          <label htmlFor=\"comment\">暂无评论，快来抢沙发吧！</label>\n        </div>\n      );\n    }\n  }\n\n  // 音乐播放结束\n  audioEnded() {\n    this.props.setPlayingState(2);\n    this.playNextSong();\n  }\n\n  // 提交评论\n  submitComment() {\n    if (!this.props.authed) {\n      MyAlert.show(\"此功能需登录后使用\", 2500);\n      return;\n    }\n    let commentContent = this.refs.commentArea.value;\n    if (!commentContent) {\n      MyAlert.show(\"请输入您的评论\", 2000);\n      return;\n    }\n    let config = {\n      method: \"post\",\n      url: \"/comments/songComments.music\",\n      data: {\n        userId: this.props.userInfo.id || 3,\n        userName: \"GeekChen\",\n        songId: this.props.curSongInfo.id,\n        commentContent: commentContent,\n        type: \"1\", // 代表评论\n      },\n    };\n\n    httpRequest(config)\n      .then((res) => {\n        console.log(res);\n        if (res.data.code === 0) {\n          MyAlert.show(\"评论成功\", 2500);\n          this.getSongComments();\n          this.refs.commentArea.value = \"\";\n        }\n      })\n      .catch((err) => {\n        MyAlert.show(\"提交评论失败\", 2500);\n        console.log(err);\n      });\n  }\n  // 获取当前歌曲评论\n  getSongComments() {\n    console.log(this.props.curSongInfo.id);\n    let config = {\n      method: \"post\",\n      url: \"/comments/getSongComments.music\",\n      data: {\n        userId: this.props.userInfo.id || 3,\n        songId: this.props.curSongInfo.id,\n        type: \"1\", // 代表评论\n      },\n    };\n    httpRequest(config)\n      .then((res) => {\n        console.log(res);\n        if (res.data.code === 0) {\n          let resList = res.data.data;\n          let list = resList.sort((a, b) => {\n            return b.id - a.id;\n          });\n          console.log(list);\n          this.props.sendCommentList(res.data.data);\n          // MyAlert.show(\"获取评论成功\", 2500);\n        }\n      })\n      .catch((err) => {\n        MyAlert.show(\"获取评论失败\", 2500);\n        console.log(err);\n      });\n  }\n\n  initCanvasAndAudioContext() {\n    //开始播放时触发\n    //part1: 画布\n    var audio = document.getElementById(\"audio\");\n    var canvas = document.getElementById(\"canvas\");\n    var context = canvas.getContext(\"2d\");\n\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    var WIDTH = canvas.width;\n    var HEIGHT = canvas.height;\n\n    //part2: 音频\n    // var files = this.files; //声音文件\n    // audio.src = URL.createObjectURL(files[0]);\n\n    audio.load();\n    //part3: 分析器\n    var AudCtx = new AudioContext(); //音频内容\n    var src = AudCtx.createMediaElementSource(audio);\n    // console.log(src);\n    var analyser = AudCtx.createAnalyser();\n    src.connect(analyser);\n    analyser.connect(AudCtx.destination);\n    analyser.fftSize = 128; //快速傅里叶变换, 必须为2的N次方\n    var bufferLength = analyser.frequencyBinCount; // = fftSize * 0.5\n    //part4: 变量\n    var barWidth = WIDTH / bufferLength - 1; //间隔1px\n    var barHeight;\n\n    var dataArray = new Uint8Array(bufferLength); //8位无符号定长数组\n\n    //part5: 动态监听\n    function renderFrame() {\n      console.log(\"renderFrame\");\n      requestAnimationFrame(renderFrame);\n      // console.log(animationId);\n      //方法renderFrame托管到定时器，无限循环调度，频率<16.6ms/次\n      context.fillStyle = \"#ACCAF8\"; //背景色\n      context.fillRect(0, 0, WIDTH, HEIGHT); //画布拓展全屏,动态调整\n\n      analyser.getByteFrequencyData(dataArray); //获取当前时刻的音频数据\n\n      //part6: 绘画声压条\n      var x = 0;\n      for (var i = 0; i < bufferLength; i++) {\n        var data = dataArray[i]; //int,0~255\n\n        var percentV = data / 255; //纵向比例\n        var percentH = i / bufferLength; //横向比例\n\n        barHeight = HEIGHT * percentV;\n\n        //gbk,0~255\n        var r = 255 * percentV; //值越大越红\n        var g = 255 * percentH; //越靠右越绿\n        var b = 50;\n\n        context.fillStyle = \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n        context.fillRect(x, HEIGHT - barHeight, barWidth, barHeight);\n\n        x += barWidth + 1; //间隔1px\n      }\n    }\n    renderFrame();\n    //part7: 播放声音\n    // audio.play();\n  }\n\n  //点击进度条外层\n  processContainerClickHandler(e) {\n    // console.log(\"外层元素：\", e);\n    e.stopPropagation();\n    //鼠标点击的绝对位置\n    var mousePos = this.mouseCoords(e);\n    var x = mousePos.x;\n    // var y = mousePos.y;\n    //alert(\"鼠标点击的绝对位置坐标：\"+x+\",\"+y);\n\n    //获取div在body中的绝对位置\n    var x1 = $(e.currentTarget).offset().left;\n    // var y1 = $(e.currentTarget).offset().top;\n    let width = $(e.currentTarget).width();\n    //alert(\"div在body中的绝对位置坐标：\"+x1+\",\"+y1);\n\n    //鼠标点击位置相对于div的坐标\n    var x2 = x - x1;\n    // var y2 = y - y1;\n    // console.log(x2 / width);\n    let percent = (x2 / width).toFixed(2) * 100;\n    $(\".process-bar\").width(percent + \"%\");\n    // console.log(percent);\n    // console.log(this.refs.audio);\n    this.setState(\n      {\n        curPlayingTimePercent: percent,\n      },\n      () => {\n        this.setAudioCurPlayingTime();\n      }\n    );\n  }\n\n  // 当前鼠标的绝对位置\n  mouseCoords(event) {\n    if (event.pageX || event.pageY) {\n      return { x: event.pageX, y: event.pageY };\n    }\n    return {\n      x: event.clientX + document.body.scrollLeft - document.body.clientLeft,\n      y: event.clientY + document.body.scrollTop - document.body.clientTop,\n    };\n  }\n\n  // 设置audio当前播放时间\n  setAudioCurPlayingTime() {\n    this.setState({\n      curState: true,\n    });\n    let curTime = this.state.curPlayingTimePercent;\n    // console.log(curTime);\n    let duration = this.state.duration;\n    // console.log(duration);\n    let targetTime = ((curTime / 100) * duration).toFixed(2);\n    // console.log(targetTime);\n    let audio = this.refs.audio;\n    console.log(audio);\n    audio.currentTime = targetTime;\n  }\n\n  //获取音乐的数据流  被父组件调用的\n  getAudioStream(item, type) {\n    let curSongId = this.props.curSongInfo.id;\n    if (item.id === curSongId) {\n      if (this.props.isPlaying === 1) {\n        return;\n      }\n    }\n    this.setState({\n      curList: type,\n    });\n    this.props.sendCurSongInfo(item);\n    this.props.setPlayingState(1);\n    setTimeout(() => {\n      this.getSongComments();\n    }, 0);\n    console.log(type);\n    let songUrl = `${item.albumName}/${item.fileName}`;\n    let audio = document.querySelector(\"#audio\");\n\n    audio.src = \"/src/getSongStream.music?url=\" + songUrl;\n    audio.play();\n  }\n\n  // 播放 暂停 切换等操作\n  optionClickHandler(event) {\n    let currentTarget = event.currentTarget;\n    $(currentTarget).siblings().removeClass(\"active\").end().addClass(\"active\");\n    if ($(currentTarget).hasClass(\"collect\")) {\n      console.log(\"collect\");\n      this.collectSongBySongId();\n    } else if ($(currentTarget).hasClass(\"prev\")) {\n      this.playPrevSong();\n    } else if ($(currentTarget).hasClass(\"paused\")) {\n      console.log(\"paused\");\n      this.pauseTheSong();\n    } else if ($(currentTarget).hasClass(\"play\")) {\n      console.log(\"play\");\n      this.playTheSong();\n    } else if ($(currentTarget).hasClass(\"next\")) {\n      this.playNextSong();\n    } else if ($(currentTarget).hasClass(\"share\")) {\n      this.shareMusic();\n    }\n  }\n\n  // 播放当前列表的下一首\n  playNextSong() {\n    let curList = this.state.curList;\n    let curSongId = this.props.curSongInfo.id;\n    console.log(\"curSongId:-----\", curSongId);\n    if (curList === \"allList\") {\n      let allList = this.props.allList;\n      allList.forEach((item, albumIdx) => {\n        if (Array.isArray(item.children)) {\n          let children = item.children;\n          children.forEach((song, childIdx) => {\n            if (song.id === curSongId) {\n              if (childIdx < children.length - 1) {\n                let songWillPlay = children[childIdx + 1];\n                this.getAudioStream(songWillPlay, \"allList\");\n                this.props.sendCurSongInfo(songWillPlay);\n              } else {\n                if (albumIdx < allList.length - 1) {\n                  let songWillPlay = allList[albumIdx + 1].children[0];\n                  this.getAudioStream(songWillPlay, \"allList\");\n                  this.props.sendCurSongInfo(songWillPlay);\n                } else {\n                  MyAlert.show(\"已经是最后一首啦\", 2000);\n                }\n              }\n            }\n          });\n        }\n      });\n    } else if (curList === \"collect\") {\n      let collectList = this.props.collectList;\n      collectList.forEach((item, idx) => {\n        if (curSongId === item.id) {\n          if (idx < collectList.length - 1) {\n            let songWillPlay = collectList[idx + 1];\n            this.getAudioStream(songWillPlay, \"collect\");\n            this.props.sendCurSongInfo(songWillPlay);\n          } else {\n            MyAlert.show(\"已经是您收藏的宝贝歌单的最后一首啦\", 2000);\n          }\n        }\n      });\n    } else if (curList === \"search\") {\n      let searchList = this.props.searchList;\n      for (let idx = 0; idx < searchList.length; idx++) {\n        let cell = searchList[idx];\n        if (cell.id === curSongId) {\n          if (idx < searchList.length - 1) {\n            let songWillPlay = searchList[idx + 1];\n            this.getAudioStream(songWillPlay, \"search\");\n            this.props.sendCurSongInfo(songWillPlay);\n          } else {\n            MyAlert.show(\"已经是您搜索的宝贝歌单的最后一首啦\", 2000);\n          }\n        }\n      }\n    }\n  }\n\n  // 播放当前列表的上一首\n  playPrevSong() {\n    let curList = this.state.curList;\n    let curSongId = this.props.curSongInfo.id;\n    if (curList === \"allList\") {\n      let allList = this.props.allList;\n      allList.forEach((item, albumIdx) => {\n        if (Array.isArray(item.children)) {\n          let children = item.children;\n          children.forEach((song, childIdx) => {\n            if (song.id === curSongId) {\n              if (childIdx !== 0) {\n                let songWillPlay = children[childIdx - 1];\n                this.getAudioStream(songWillPlay, \"allList\");\n                this.props.sendCurSongInfo(songWillPlay);\n              } else {\n                if (albumIdx !== 0) {\n                  let songWillPlay = allList[albumIdx - 1].children[0];\n                  this.getAudioStream(songWillPlay, \"allList\");\n                  this.props.sendCurSongInfo(songWillPlay);\n                } else {\n                  MyAlert.show(\"已经是歌单的第一首啦\", 2000);\n                }\n              }\n            }\n          });\n        }\n      });\n    } else if (curList === \"collect\") {\n      let collectList = this.props.collectList;\n      collectList.forEach((item, idx) => {\n        if (curSongId === item.id) {\n          if (idx !== 0) {\n            let songWillPlay = collectList[idx - 1];\n            this.getAudioStream(songWillPlay, \"collect\");\n            this.props.sendCurSongInfo(songWillPlay);\n          } else {\n            MyAlert.show(\"已经是您收藏的宝贝歌单的第一首啦\", 2000);\n          }\n        }\n      });\n    } else if (curList === \"search\") {\n      let searchList = this.props.searchList;\n      for (let idx = 0; idx < searchList.length; idx++) {\n        let cell = searchList[idx];\n        if (cell.id === curSongId) {\n          if (idx !== 0) {\n            let songWillPlay = searchList[idx - 1];\n            this.getAudioStream(songWillPlay, \"search\");\n            this.props.sendCurSongInfo(songWillPlay);\n          } else {\n            MyAlert.show(\"已经是您搜索的宝贝歌单的第一首啦\", 2000);\n          }\n        }\n      }\n    }\n  }\n\n  //根据歌曲id收藏\n  collectSongBySongId() {\n    if (!this.props.authed) {\n      MyAlert.show(\"此功能需登录后使用\", 2500);\n      return;\n    }\n    let curSongId = this.props.curSongInfo.id;\n    if (!curSongId) {\n      MyAlert.show(\"暂无歌曲播放\", 2000);\n      return;\n    }\n    let config = {\n      method: \"post\",\n      url: \"/songs/collect.music\",\n      data: {\n        userId: this.props.userInfo.id,\n        songId: curSongId,\n      },\n    };\n    console.log(curSongId);\n    httpRequest(config)\n      .then((res) => {\n        console.log(res);\n        let data = res.data;\n        if (data.code === 0) {\n          this.props.refreshCollectList();\n          // alert(data.val);\n        } else {\n          // alert(data.val);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // 搜索\n  searchHandler(val) {\n    let config = {\n      data: { keyWords: val },\n      method: \"post\",\n      url: \"/songs/searchByKeyWords.music\",\n    };\n    httpRequest(config)\n      .then((res) => {\n        console.log(res);\n        let data = res.data;\n        if (data.code === 0) {\n          if (!data.songsList.length) {\n            MyAlert.show(\"Sorry，曲库还未录入您所搜索的歌曲😢\", 2500);\n          }\n          this.props.setSearchResult(data.songsList);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // 播放时 更新进度条\n  durationChangeHandler() {}\n\n  loadMetaData() {\n    // let dur = this.refs.audio.duration;\n    // console.log(dur);\n    this.setState({\n      duration: this.refs.audio.duration,\n    });\n    // console.log(this.refs.audio.duration);\n    console.log(\"loadMetaData\");\n  }\n  // 播放时间更新\n  timeUpdateHandler() {\n    this.setState({\n      curTime: this.refs.audio.currentTime,\n    });\n    let percent =\n      (this.refs.audio.currentTime / this.state.duration).toFixed(5) * 100;\n    this.refs.processBar.style.width = percent + \"%\";\n  }\n\n  playTheSong() {\n    console.log(\"playTheSong\");\n    if (this.props.curSongInfo.id) {\n      this.refs.audio.play();\n      this.props.setPlayingState(1);\n    }\n  }\n  pauseTheSong() {\n    if (this.props.curSongInfo.id) {\n      this.refs.audio.pause();\n      this.props.setPlayingState(2);\n    }\n  }\n  shareMusic() {\n    console.log(\"share music\");\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setSearchResult(list) {\n      const action = {\n        type: \"searchList\",\n        searchList: list,\n      };\n      dispatch(action);\n    },\n    sendCurSongInfo(songInfo) {\n      const action = {\n        type: \"curSongInfo\",\n        curSongInfo: songInfo,\n      };\n      dispatch(action);\n    },\n    setPlayingState(status) {\n      const action = {\n        type: \"isPlaying\",\n        isPlaying: status,\n      };\n      dispatch(action);\n    },\n    sendCommentList(list) {\n      const action = {\n        type: \"commentList\",\n        commentList: list,\n      };\n      dispatch(action);\n    },\n    setMouseDown(status) {\n      const action = {\n        type: \"mouseDown\",\n        mouseStatus: status,\n      };\n      dispatch(action);\n    },\n  };\n};\n\nconst mapStateToProps = (state) => {\n  // console.log(\"Player组件的mapStateToProps中的state\", state);\n  return state;\n};\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true,\n})(Player);\n","import React, { Fragment, Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Collapse } from \"antd\";\nimport httpRequest from \"@/utils/HttpRequest\";\nimport \"@/assets/css/rightList.css\";\nconst { Panel } = Collapse;\n\nclass RightList extends Component {\n  constructor(props) {\n    super(props);\n    this.mouseDownHandler = this.mouseDownHandler.bind(this);\n    this.mouseMoveHandler = this.mouseMoveHandler.bind(this);\n    this.mouseUpHandler = this.mouseUpHandler.bind(this);\n  }\n  render() {\n    return (\n      <Fragment>\n        <div className=\"item right right-list\">\n          <div className=\"collection right-top\">\n            <h5 className=\"collect-title\">收藏列表</h5>\n            <div className=\"collection-list-container\">\n              <ul className=\"collection-list\">\n                {this.props.state.collectList.map((item, idx) => {\n                  return (\n                    <li\n                      onClick={this.playByName.bind(this, item, \"collect\")}\n                      key={idx}\n                      className={\n                        this.props.state.curSongInfo.id === item.id\n                          ? \"songName active\"\n                          : \"\"\n                      }\n                    >\n                      <span className=\"collect-song-name\">\n                        {item.fileNameChinese}\n                      </span>{\" \"}\n                      —{\" \"}\n                      <span className=\"collect-album-name\">\n                        {item.albumChinese}\n                      </span>\n                    </li>\n                  );\n                })}\n                {this.genHasNoCollect()}\n              </ul>\n            </div>\n          </div>\n          <div\n            id=\"drag\"\n            className=\"right-middle\"\n            onMouseDown={this.mouseDownHandler}\n            onMouseMove={this.mouseMoveHandler}\n            onMouseUp={this.mouseUpHandler}\n          ></div>\n          <div className=\"all-list right-bottom\">\n            <h5 className=\"all-list-title\">全部歌曲</h5>\n            <div className=\"all-list-container\">\n              {this.props.state.allList.map((item, idx) => {\n                return (\n                  <Collapse className=\"collapse\" accordion key={idx}>\n                    <Panel className=\"panel\" header={item.albumChinese}>\n                      {item.children.map((item, idx) => {\n                        return (\n                          <p\n                            onClick={this.playByName.bind(\n                              this,\n                              item,\n                              \"allList\"\n                            )}\n                            className={\n                              this.props.state.curSongInfo.id === item.id\n                                ? \"songName active\"\n                                : \"songName\"\n                            }\n                            key={idx}\n                          >\n                            {item.fileNameChinese}\n                          </p>\n                        );\n                      })}\n                      <p>{item.fileNameChinese}</p>\n                    </Panel>\n                  </Collapse>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  componentDidMount() {\n    let allList = this.props.state.allList;\n    if (allList.length === 0) {\n      this.getRightAllList();\n    }\n  }\n\n  genHasNoCollect() {\n    if (this.props.state.collectList.length === 0) {\n      if (this.props.state.userInfo.id) {\n        return <div className=\"empty-collect\">暂无</div>;\n      } else {\n        return <div className=\"empty-collect\">请登录后使用此功能</div>;\n      }\n    }\n  }\n\n  playByName(item, type) {\n    let curSongId = this.props.state.curSongInfo.id;\n    if (item.id === curSongId) {\n      if (this.props.state.isPlaying === 1) {\n        return;\n      }\n    }\n    this.props.playByUrl(item, type);\n    this.props.sendCurSongInfo(item);\n  }\n\n  getRightAllList() {\n    let songsConfig = {\n      method: \"post\",\n      url: \"/songs/getSongsList.music\",\n      showLoading: true,\n    };\n    let collectConfig = {\n      method: \"post\",\n      url: \"/songs/getCollectList.music\",\n      data: {\n        userId: this.props.state.userInfo.id,\n      },\n      showLoading: true,\n    };\n    let songListRequest = httpRequest(songsConfig);\n    let collectListRequest = httpRequest(collectConfig);\n    Promise.all([songListRequest, collectListRequest])\n      .then((res) => {\n        let songListRes = res[0].data.songsList;\n        // console.log(songListRes);\n        this.props.sendAllList(songListRes);\n        this.props.sendCurSongInfo(songListRes[0].children[0]);\n        let songUrl = `${songListRes[0].children[0].albumName}/${songListRes[0].children[0].fileName}`;\n        document.querySelector(\"#audio\").src =\n          \"/src/getSongStream.music?url=\" + songUrl;\n        let collectListRes = res[1].data.songsList;\n        this.computeCollectList(songListRes, collectListRes);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  // 根据全部歌曲列表，及收藏列表的歌曲id，获取收藏列表具体信息\n  computeCollectList(allList, collectList) {\n    let result = [];\n    for (let i = 0; i < allList.length; i++) {\n      let allCellChildren = allList[i].children;\n      allCellChildren.forEach((item, idx) => {\n        collectList.forEach((colItem, colIdx) => {\n          // console.log(item);\n          if (item.id === colItem.songId) {\n            item.orderId = colItem.id;\n            result.push(item);\n          }\n        });\n      });\n    }\n    // console.log(result);\n    let r = result.sort(function (a, b) {\n      return a.orderId - b.orderId;\n    });\n    this.props.sendCollectList(r);\n  }\n\n  // 获取收藏列表\n  getCollectList() {\n    let config = {\n      method: \"post\",\n      url: \"/songs/getCollectList.music\",\n      data: {\n        userId: this.props.state.userInfo.id,\n      },\n    };\n    httpRequest(config)\n      .then((res) => {\n        console.log(res.data);\n        let data = res.data;\n        if (data.code === 0) {\n          console.log(this.props.state.allList);\n          this.computeCollectList(this.props.state.allList, data.songsList);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  mouseDownHandler() {\n    console.log(\"mouseDownHandler\");\n  }\n  mouseMoveHandler() {\n    console.log(\"mouseMoveHandler\");\n  }\n  mouseUpHandler() {\n    console.log(\"mouseUpHandler\");\n  }\n}\n\n// 传入\nconst mapStateToProps = (state) => {\n  // console.log(\"mapStateToProps\", state);\n  return {\n    state,\n  };\n};\n// 传出\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    sendCollectList(list) {\n      const action = {\n        type: \"collectList\",\n        collectList: list,\n      };\n      dispatch(action);\n    },\n    sendAllList(list) {\n      const action = {\n        type: \"allList\",\n        allList: list,\n      };\n      dispatch(action);\n    },\n    sendCurSongInfo(songInfo) {\n      const action = {\n        type: \"curSongInfo\",\n        curSongInfo: songInfo,\n      };\n      dispatch(action);\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true,\n})(RightList);\n","import React, { Component } from \"react\";\nimport Player from \"@/views/Main/Player\";\nimport RightList from \"@/views/Main/RightList\";\nimport { connect } from \"react-redux\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n    this.playByUrl = this.playByUrl.bind(this);\n  }\n  render() {\n    return (\n      <div className=\"main\">\n        <div className=\"item player-container left\">\n          <Player\n            ref=\"player\"\n            refreshCollectList={this.refreshCollectList.bind(this)}\n          ></Player>\n        </div>\n        <RightList ref=\"RightList\" playByUrl={this.playByUrl}></RightList>\n        \n      </div>\n    );\n  }\n\n  // 被父级调用 搜索\n  searchCallByParent(keyWords) {\n    // this.props.searchByKeyWords(keyWords);\n    this.refs.player.searchHandler(keyWords);\n  }\n  //刷新收藏列表\n  refreshCollectList() {\n    console.log(this.refs);\n    this.refs.RightList.getCollectList();\n    console.log(\"刷新收藏列表\");\n  }\n  playByUrl(item, type) {\n    console.log(type);\n\n    this.props.sendCurSongInfo(item);\n    this.refs.player.getAudioStream(item, type);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  // console.log(\"Main组件的mapStateToProps中的state\", state);\n  return state;\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    sendCurSongInfo(songInfo) {\n      const action = {\n        type: \"curSongInfo\",\n        curSongInfo: songInfo,\n      };\n      dispatch(action);\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true,\n})(Main);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"@/assets/css/userCenter.less\";\nimport avatar from \"@/assets/imgs/lizhi.png\";\nimport { Link, withRouter } from \"react-router-dom\";\nclass UserCenter extends Component {\n  render() {\n    return (\n      <div className=\"user-center\">\n        <p\n          className={this.props.authed ? \"hide\" : \"go-to-login\"}\n          onClick={this.toLogin.bind(this)}\n        >\n          登录\n        </p>\n        <div className={this.props.authed ? \"info-container\" : \"hide\"}>\n          <span className=\"nick-name\">{this.props.userInfo.nickName}</span>\n          <img\n            className=\"avatar\"\n            src={\n              this.props.userInfo.avatar ? this.props.userInfo.avatar : avatar\n            }\n            alt=\"avatar\"\n          />\n          <div className=\"user-info-options\">\n            <ul>\n              <div className=\"line-box\">\n                <li>\n                  <Link to=\"/index\">\n                    <i className=\"iconfont icon-yinle\"></i>去听歌\n                  </Link>\n                </li>\n                <li>\n                  <i className=\"iconfont icon-xin1\"></i>我的收藏\n                </li>\n                <li>\n                  <i className=\"iconfont icon-icon_good\"></i>我的赞\n                </li>\n                <li>\n                  <i className=\"iconfont icon-pinglun\"></i>我发出的评论\n                </li>\n              </div>\n              <li>\n                <i className=\"iconfont icon-bianji\"></i>\n                <Link to=\"/editUserInfo\">修改个人信息</Link>\n              </li>\n              <li onClick={this.logout.bind(this)}>\n                <i className=\"iconfont icon-tuichu_huaban1\"></i>退出\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  toLogin() {\n    this.props.goToLogin(true);\n    this.props.history.push(\"/login\");\n  }\n\n  logout() {\n    this.props.history.push(\"/login\");\n    this.props.setAuthed(false);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return state;\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    goToLogin(status) {\n      const action = {\n        type: \"goToLogin\",\n        toLogin: status,\n      };\n      dispatch(action);\n    },\n    sendCurSongInfo(songInfo) {\n      const action = {\n        type: \"curSongInfo\",\n        curSongInfo: songInfo,\n      };\n      dispatch(action);\n    },\n    setAuthed(flag) {\n      const action = {\n        type: \"authed\",\n        authed: flag,\n      };\n      dispatch(action);\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true,\n})(withRouter(UserCenter));\n","import React, { Component } from \"react\";\nimport UserCenter from \"./UserCenter\";\nimport httpRequest from \"@/utils/HttpRequest\";\nimport myAlert from \"@/utils/MyAlert\";\nimport { connect } from \"react-redux\";\nimport \"@/assets/css/header.css\";\nimport logo from \"@/assets/imgs/lizhi.png\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Header extends Component {\n  render() {\n    return (\n      <div className=\"header\">\n        <div\n          className=\"logo-container\"\n          onClick={() => this.props.history.push(\"/index\")}\n        >\n          <span>我愛</span> <img src={logo} alt=\"\" /> <span>南京</span>\n        </div>\n        <div className=\"search-container\">\n          <input type=\"text\" id=\"search-val\" className=\"search-input\" />\n          <button\n            placeholder=\"请输入专辑名或歌名\"\n            className=\"search-btn\"\n            onClick={this.searchHandler.bind(this)}\n          >\n            <i className=\"iconfont icon-search\">搜索</i>\n          </button>\n        </div>\n        <UserCenter></UserCenter>\n      </div>\n    );\n  }\n  // 搜索\n  searchHandler() {\n    let searchVal = document.querySelector(\"#search-val\").value;\n    if (!searchVal) {\n      myAlert.show(\"请输入关键字\", 2500);\n      return;\n    }\n    this.props.history.push(\"/index\");\n    let config = {\n      data: { keyWords: searchVal },\n      method: \"post\",\n      url: \"/songs/searchByKeyWords.music\",\n    };\n    httpRequest(config)\n      .then((res) => {\n        console.log(res);\n        let data = res.data;\n        if (data.code === 0) {\n          if (!data.songsList.length) {\n            myAlert.show(\"Sorry，曲库还未录入您所搜索的歌曲😢\", 2500);\n          }\n          this.props.setSearchResult(data.songsList);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setSearchResult(list) {\n      const action = {\n        type: \"searchList\",\n        searchList: list,\n      };\n      dispatch(action);\n    },\n\n  };\n};\n\nconst mapStateToProps = (state) => {\n  return state;\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true,\n})(withRouter(Header));\n","import React, { Component } from \"react\";\nimport Main from \"./Main/Main\";\nimport Header from \"./Header/Header\";\n\nclass Index extends Component {\n  render() {\n    return (\n      <div className=\"index\">\n        <Header></Header>\n        <Main ref=\"main\"></Main>\n      </div>\n    );\n  }\n}\nexport default Index;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Header from \"@/views/Header/Header\";\nimport \"@/assets/css/edituserInfo.css\";\nimport { Button, Input, Space, Modal } from \"antd\";\nimport avatar from \"@/assets/imgs/lizhi.png\";\nimport httpRequest from \"@/utils/HttpRequest\";\nimport MyAlert from \"@/utils/MyAlert\";\nimport md5 from \"js-md5\";\nclass EditPassword extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      avatar: \"\",\n      editNickNameStatus: false,\n      showModal: false,\n      canEditPassword: false,\n    };\n  }\n  render() {\n    return (\n      <div className=\"index\">\n        <Header></Header>\n        <div className=\"user-info\">\n          <div className=\"content\">\n            <h3 className=\"title\">个人资料</h3>\n            <div className=\"items\">\n              <div className=\"item avatar\">\n                <p className=\"label avatar-title\">头像</p>\n                <img ref=\"avatar\" src={this.props.userInfo.avatar} alt=\"头像\" />\n                <div className=\"opt\">\n                  <span className=\"des\">\n                    支持jpg、png格式，大小为5M以内的图片\n                  </span>\n                  <label className=\"new-avatar-label\" htmlFor=\"new-avatar\">\n                    选择文件\n                  </label>\n                  <input\n                    onChange={this.handleAvatarIptChange.bind(this)}\n                    type=\"file\"\n                    id=\"new-avatar\"\n                    accept=\"image/jpg,image/png\"\n                  />\n                </div>\n              </div>\n              <div className=\"item nick-name\">\n                <p className=\"label nick-name-title\">用户名</p>\n                <p className=\"detail\">{this.props.userInfo.userName}</p>\n              </div>\n              <div className=\"item nick-name\">\n                <p className=\"label nick-name-title\">昵称</p>\n                <p className=\"detail\">{this.renderNickName()}</p>\n                <div className=\"btns-container\">\n                  <span\n                    className=\"edit-btn\"\n                    onClick={this.editNickName.bind(this)}\n                  >\n                    <i className=\"iconfont icon-bianji\">\n                      {this.state.editNickNameStatus ? \"完成\" : \"编辑\"}\n                    </i>\n                  </span>\n                  <span\n                    className={\n                      this.state.editNickNameStatus ? \"cancel\" : \"hide\"\n                    }\n                    onClick={this.setEditNickNameStatusFalse.bind(this)}\n                  >\n                    <i className=\"iconfont icon-bianji\">取消</i>\n                  </span>\n                </div>\n              </div>\n              <div className=\"item password\">\n                <p className=\"label password-title\">密码</p>\n                <Button\n                  onClick={this.showModal.bind(this)}\n                  className=\"confirm\"\n                  type=\"primary\"\n                  size=\"medium\"\n                >\n                  修改密码\n                </Button>\n              </div>\n            </div>\n            <Modal\n              className=\"modal\"\n              title=\"修改密码\"\n              visible={this.state.showModal}\n              onCancel={this.hideModal.bind(this)}\n              footer={[\n                <Button key=\"back\" onClick={this.hideModal.bind(this)}>\n                  取消\n                </Button>,\n                <Button\n                  key=\"submit\"\n                  type=\"primary\"\n                  onClick={this.editPassword.bind(this)}\n                >\n                  确认\n                </Button>,\n              ]}\n            >\n              <Space className=\"space\" direction=\"vertical\">\n                <label htmlFor=\"ori-password\">请输入原密码：</label>\n                <Input.Password\n                  className=\"ipt\"\n                  id=\"ori-password\"\n                  placeholder=\"input password\"\n                />\n                <label htmlFor=\"new-password\">请输入新密码：</label>\n                <Input.Password\n                  className=\"ipt\"\n                  id=\"new-password\"\n                  placeholder=\"input password\"\n                />\n                <label htmlFor=\"re-new-password\">请再次输入新密码：</label>\n                <Input.Password\n                  className=\"ipt\"\n                  id=\"re-new-password\"\n                  placeholder=\"input password\"\n                  onChange={this.checkNewPassword.bind(this)}\n                />\n              </Space>\n            </Modal>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.setState({\n      avatar: avatar,\n    });\n  }\n  setEditNickNameStatusFalse() {\n    this.setState({\n      editNickNameStatus: false,\n    });\n  }\n  // 确认密码的输入框改变事件\n  checkNewPassword() {\n    let newPassword = document.querySelector(\"#new-password\").value.toString();\n    let reNewPassword = document\n      .querySelector(\"#re-new-password\")\n      .value.toString();\n    if (newPassword !== reNewPassword) {\n      MyAlert.show(\"两次密码输入不一致\", 2500);\n      this.setState({\n        canEditPassword: false,\n      });\n      return;\n    } else {\n      this.setState({\n        canEditPassword: true,\n      });\n    }\n  }\n  // 修改密码\n  editPassword() {\n    let status = this.state.canEditPassword;\n    if (!status) {\n      MyAlert.show(\"两次密码输入不一致\", 2500);\n      return;\n    }\n    let oldPwd = md5(document.querySelector(\"#ori-password\").value.toString());\n    let reNewPassword = md5(\n      document.querySelector(\"#re-new-password\").value.toString()\n    );\n    let config = {\n      method: \"post\",\n      url: \"/users/edit_password.music\",\n      data: {\n        oldPwd,\n        reNewPassword,\n        userId: this.props.userInfo.id,\n      },\n    };\n    httpRequest(config)\n      .then((res) => {\n        console.log(res);\n        if (res.data.code === 0) {\n          MyAlert.show(\"修改密码成功\", 2500);\n          this.hideModal();\n        } else if (res.data.code === 4) {\n          MyAlert.show(\"原密码输入有误\", 2500);\n        }\n      })\n      .catch((err) => {\n        MyAlert.show(\"修改密码失败\", 2500);\n        console.log(err);\n      });\n  }\n\n  // 修改后 重新获取用户信息\n  getUserInfo() {\n    let config = {\n      method: \"post\",\n      url: \"/users/get_userInfo.music\",\n      data: {\n        userId: this.props.userInfo.id,\n      },\n    };\n    httpRequest(config)\n      .then((res) => {\n        if (res.data.code === 0) {\n          // MyAlert.show(\"获取信息成功\", 2500);\n          this.props.setUserInfo(res.data.data);\n        }\n        console.log(res);\n      })\n      .catch((err) => {\n        MyAlert.show(\"获取信息失败\", 2500);\n        console.log(err);\n      });\n  }\n  // 生成昵称部分的span和input\n  renderNickName() {\n    if (!this.state.editNickNameStatus) {\n      return <span>{this.props.userInfo.nickName}</span>;\n    } else {\n      return (\n        <span>\n          <input onChange={this.nickNameChange.bind(this)} />\n          {/* <input onChange={this.nickNameChange.bind(this)} value={this.props.userInfo.nickName} /> */}\n        </span>\n      );\n    }\n  }\n  nickNameChange(e) {\n    let val = e.currentTarget.value;\n    this.setState({\n      nickName: val,\n    });\n    // console.log(e.currentTarget.value);\n  }\n  // 修改昵称\n  editNickName() {\n    let nickName = this.state.nickName;\n    let status = this.state.editNickNameStatus;\n    this.setState({\n      editNickNameStatus: !status,\n    });\n    if (status) {\n      // 是在修改的状态\n      let config = {\n        method: \"post\",\n        url: \"/users/edit_nickName.music\",\n        data: {\n          userId: this.props.userInfo.id,\n          nickName: nickName,\n        },\n      };\n      httpRequest(config)\n        .then((res) => {\n          if (res.data.code === 0) {\n            MyAlert.show(\"成功\", 1000);\n            this.getUserInfo();\n          }\n          // console.log(res);\n        })\n        .catch((err) => {\n          MyAlert.show(\"修改昵称失败\", 2500);\n          console.log(err);\n        });\n    }\n  }\n\n  // 上传新头像\n  handleAvatarIptChange(e) {\n    let file = e.currentTarget.files[0];\n    let size = file.size / 1024; //kb\n    // console.log(size);\n    if (size / 1024 > 5) {\n      MyAlert.show(\"图片大于5M\", 2000);\n      return;\n    }\n    // let blob = window.URL.createObjectURL(file);\n    // console.log(window.atob(file));\n    // let base64 = window.atob(blob);\n    // console.log(base64);\n    let base64;\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => {\n      base64 = reader.result;\n      this.uploadAvatar(base64);\n      // console.log(reader.result);\n    };\n  }\n\n  uploadAvatar(fileBase64) {\n    let config = {\n      method: \"post\",\n      url: \"users/edit_avatar.music\",\n      data: {\n        userId: this.props.userInfo.id,\n        url: fileBase64,\n      },\n    };\n    httpRequest(config)\n      .then((res) => {\n        // console.log(res);\n        if (res.data.code === 0) {\n          MyAlert.show(\"修改成功\", 2000);\n          this.getUserInfo();\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    // this.setState({\n    //   avatar: blob,\n    // });\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false,\n    });\n  }\n  showModal() {\n    this.setState({\n      showModal: true,\n    });\n  }\n}\nconst mapStateToProps = (state) => {\n  return state;\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setUserInfo(userInfo) {\n      const action = {\n        type: \"userInfo\",\n        userInfo: userInfo,\n      };\n      dispatch(action);\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true,\n})(EditPassword);\n","import LoginAndRegister from \"@/views/LoginAndRegister/LoginAndRegister\";\nimport Index from \"@/views/Index\";\nimport EditUserInfo from \"@/views/Header/User/EditUserInfo\";\n\nconst Routers = [\n    {\n        key: 'LoginAndRegister',\n        path: '/login',\n        requiresAuth: false,\n        component: LoginAndRegister\n    },\n    {\n        key: 'Register',\n        path: '/register',\n        requiresAuth: false,\n        component: LoginAndRegister\n    },\n    {\n        key: 'Index',\n        path: '/index',\n        requiresAuth: false,\n        component: Index\n    },\n    {\n        key: 'EditUserInfo',\n        path: '/editUserInfo',\n        requiresAuth: true,\n        component: EditUserInfo\n    },\n]\n\nexport default Routers;","import React from \"react\";\nimport { Route, Redirect, Switch } from \"react-router-dom\";\nconst renderRoutes = (routes, authed, authPath, switchProps = {}) =>\n  routes ? (\n    <Switch {...switchProps}>\n      {routes.map((route, i) => (\n        <Route\n          key={route.key || i}\n          path={'/player'+route.path}\n          exact={route.exact}\n          render={(props) => {\n            if (!route.requiresAuth || authed || route.path === authPath) {\n              return <route.component {...props} route={route} />;\n            }\n            return (\n              <Redirect\n                to={{ pathname: authPath, state: { from: props.location } }}\n              />\n            );\n          }}\n        />\n      ))}\n    </Switch>\n  ) : null;\n\nexport default renderRoutes;\n","import React, { Component } from \"react\";\nimport { Switch } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport routers from \"@/routers/index.js\";\nimport renderRoutes from \"@/utils/renderRoutes\";\n\nconst authPath = \"/login\"; // 默认未登录的时候返回的页面，可以自行设置\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authed: false,\n    };\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <Switch>{renderRoutes(routers, this.props.authed, authPath)}</Switch>\n        </header>\n      </div>\n    );\n  }\n  componentDidMount() {\n    console.log(this.props);\n    // this.props.match.url.indexOf(\"index\")\n    \n    // if (this.props.toLogin) {\n    //   this.props.history.push(\"/login\");\n    // } else {\n    //   this.props.history.push(\"/index\");\n    // }\n  }\n}\nconst mapStateToProps = (state) => {\n  return state;\n};\nexport default connect(mapStateToProps, null, null, {\n  forwardRef: true,\n})(withRouter(App));\n","const initState = {\n\tcollectList: [],\n\tallList: [],\n\tcurSongInfo: {},\n\tplayerCom: {\n\t\toptionMenus: [{\n\t\t\t\toption: \"collect\",\n\t\t\t\ticonfont: \"icon-xin\",\n\t\t\t\ttoolTip: \"收藏\",\n\t\t\t},\n\t\t\t{\n\t\t\t\toption: \"prev\",\n\t\t\t\ticonfont: \"icon-shangyishou\",\n\t\t\t\ttoolTip: \"上一首\",\n\t\t\t},\n\t\t\t{\n\t\t\t\toption: \"play big\",\n\t\t\t\ticonfont: \"icon-bofang\",\n\t\t\t\ttoolTip: \"播放\",\n\t\t\t},\n\t\t\t{\n\t\t\t\toption: \"paused big\",\n\t\t\t\ticonfont: \"icon-zanting1\",\n\t\t\t\ttoolTip: \"暂停\",\n\t\t\t},\n\t\t\t{\n\t\t\t\toption: \"next\",\n\t\t\t\ticonfont: \"icon-xiayishou\",\n\t\t\t\ttoolTip: \"下一首\",\n\t\t\t},\n\t\t],\n\t},\n\tisPlaying: 2, // 1是正在播放，2是没有播放\n\tsearchList: [],\n\tuserInfo: {},\n\tcommentList: [], // 评论内列表\n\tmouseStatus: 2, // 1 代表按下  2 代表抬起\n\tauthed: false,\n\ttoLogin: false, // 用户是否想要去登陆\n}\n\n// 要返回一个新的state\nlet reducer = (state = initState, action) => {\n\tlet newState = JSON.parse(JSON.stringify(state));\n\tswitch (action.type) {\n\t\tcase 'allList':\n\t\t\tnewState.allList = action.allList;\n\t\t\treturn newState;\n\t\tcase 'collectList':\n\t\t\tnewState.collectList = action.collectList;\n\t\t\treturn newState;\n\t\tcase 'curSongInfo':\n\t\t\tnewState.curSongInfo = action.curSongInfo;\n\t\t\treturn newState;\n\t\tcase 'searchList':\n\t\t\tnewState.searchList = action.searchList;\n\t\t\treturn newState;\n\t\tcase 'userInfo':\n\t\t\tnewState.userInfo = action.userInfo;\n\t\t\treturn newState;\n\t\tcase 'isPlaying':\n\t\t\tnewState.isPlaying = action.isPlaying;\n\t\t\treturn newState;\n\t\tcase 'commentList':\n\t\t\tnewState.commentList = action.commentList;\n\t\t\treturn newState;\n\t\tcase 'authed':\n\t\t\tnewState.authed = action.authed;\n\t\t\treturn newState;\n\t\tcase 'mouseDown':\n\t\t\tnewState.mouseStatus = action.mouseStatus;\n\t\t\treturn newState;\n\t\tcase 'goToLogin':\n\t\t\tnewState.toLogin = action.toLogin;\n\t\t\treturn newState;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport default reducer;","import {\n    createStore,\n    // compose\n} from 'redux';\nimport reducer from '../reducer';\nimport {\n    persistStore,\n    persistReducer\n} from 'redux-persist';\n// import storage from 'redux-persist/lib/storage'; // 使用localstorage进行存储\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport storageSession from 'redux-persist/lib/storage/session'\nconst persistConfig = {\n    key: 'root',\n    storage: storageSession,\n    stateReconciler: autoMergeLevel2 // 查看 'Merge Process' 部分的具体情况\n};\n\nconst myPersistReducer = persistReducer(persistConfig, reducer)\n\nconst store = createStore(myPersistReducer)\n\nexport const persistor = persistStore(store)\nexport default store\n\n\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n// const store = createStore(reducer, composeEnhancers());\n\n// export default store;\n// export default createStore(reducer);","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./App.less\";\nimport App from \"./App\";\nimport { BrowserRouter, HashRouter,historyRouter } from \"react-router-dom\";\nimport httpRequest from \"./utils/HttpRequest\";\nimport store, { persistor } from \"./store/index\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from \"redux-persist/lib/integration/react\";\nimport { Route } from \"react-router-dom\";\n// import createHistory from \"history/createHashHistory\";\n// const history = createHistory();\nwindow.httpRequest = httpRequest;\n\nReactDOM.render(\n  <BrowserRouter>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        {/* <App /> */}\n        <Route path=\"/\" component={App}></Route>\n      </PersistGate>\n    </Provider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}